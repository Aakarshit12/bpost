"use strict";(()=>{var e={};e.id=580,e.ids=[580],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2786:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var i={};n.r(i),n.d(i,{GET:()=>p,dynamic:()=>u});var r=n(9303),a=n(8716),s=n(670),o=n(7070),l=n(4544),c=n(1201);let u="force-dynamic";async function p(){try{await (0,l.Z)();let e=await c.Z.find({status:"published",isDeleted:!1}).select("title slug excerpt content author createdAt").sort({createdAt:-1}).limit(20).lean(),t=process.env.NEXTAUTH_URL||"http://localhost:3000",n=`<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog RSS Feed</title>
    <description>Latest blog posts</description>
    <link>${t}</link>
    <atom:link href="${t}/api/rss" rel="self" type="application/rss+xml" />
    <language>en-US</language>
    <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>
    ${e.map(e=>`
    <item>
      <title>${e.title}</title>
      <description><![CDATA[${e.excerpt||""}]]></description>
      <link>${t}/posts/${e.slug}</link>
      <guid>${t}/posts/${e.slug}</guid>
      <pubDate>${new Date(e.createdAt).toUTCString()}</pubDate>
      <author>${e.author}</author>
    </item>
    `).join("")}
  </channel>
</rss>`;return new o.NextResponse(n,{headers:{"Content-Type":"application/rss+xml","Cache-Control":"public, max-age=3600, s-maxage=3600"}})}catch(e){return console.error("RSS generation error:",e),o.NextResponse.json({error:"Failed to generate RSS feed"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/rss/route",pathname:"/api/rss",filename:"route",bundlePath:"app/api/rss/route"},resolvedPagePath:"C:\\Users\\aakar\\OneDrive\\Desktop\\delete\\second\\app\\api\\rss\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=d,x="/api/rss/route";function f(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},4544:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(1185),r=n.n(i);let a=process.env.MONGODB_URI,s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let o=async function(){if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");if(s.conn)return s.conn;s.promise||(s.promise=r().connect(a,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},1201:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(1185),r=n.n(i);async function a(e,t){let n=e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-").replace(/^-+|-+$/g,"");n||(n="untitled"),n.length>100&&(n=n.substring(0,100));let i=n,r=1;for(;await s(i,t);)if(i=`${n}-${r}`,++r>1e3){i=`${n}-${Date.now()}`;break}return i}async function s(e,t){let n={slug:e,isDeleted:!1};return t&&(n._id={$ne:t}),!!await r().model("Post").findOne(n)}let o=new i.Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot exceed 200 characters"],minlength:[3,"Title must be at least 3 characters"]},content:{type:String,required:[!0,"Content is required"],minlength:[10,"Content must be at least 10 characters"]},slug:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0,match:[/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"]},excerpt:{type:String,maxlength:[300,"Excerpt cannot exceed 300 characters"]},status:{type:String,enum:["draft","published","archived"],default:"draft"},featuredImage:{type:String,validate:{validator:function(e){return!e||/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i.test(e)},message:"Featured image must be a valid image URL"}},tags:[{type:String,trim:!0,lowercase:!0}],metaTitle:{type:String,maxlength:[60,"Meta title cannot exceed 60 characters"]},metaDescription:{type:String,maxlength:[160,"Meta description cannot exceed 160 characters"]},author:{type:String,default:"Admin",trim:!0},viewCount:{type:Number,default:0,min:0},isDeleted:{type:Boolean,default:!1}},{timestamps:!0,toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("readingTime").get(function(){return Math.ceil(this.content.replace(/<[^>]*>/g,"").split(/\s+/).length/200)}),o.pre("validate",async function(e){(this.isNew||this.isModified("title"))&&this.title&&(this.slug=await a(this.title,this._id?.toString())),(this.isNew||this.isModified("content"))&&this.content&&(this.excerpt=this.excerpt||function(e){let t=e.replace(/<[^>]*>/g,"").trim();return t.length>300?t.substring(0,300)+"...":t}(this.content)),console.log("Validating post:",{title:this.title,slug:this.slug}),e()}),o.index({status:1,createdAt:-1}),o.index({tags:1}),o.index({title:"text",content:"text"}),o.index({isDeleted:1,status:1});let l=r().models.Post||r().model("Post",o)}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),i=t.X(0,[276,972],()=>n(2786));module.exports=i})();