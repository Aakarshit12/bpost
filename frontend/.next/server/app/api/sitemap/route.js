"use strict";(()=>{var e={};e.id=436,e.ids=[436],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6181:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var i={};r.r(i),r.d(i,{GET:()=>u,dynamic:()=>p});var n=r(9303),a=r(8716),s=r(670),o=r(7070),l=r(4544),c=r(1201);let p="force-dynamic";async function u(){try{await (0,l.Z)();let e=await c.Z.find({status:"published",isDeleted:!1}).select("slug updatedAt").sort({updatedAt:-1}).lean(),t=process.env.NEXTAUTH_URL||"http://localhost:3000",r=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>${t}</loc>
    <lastmod>${new Date().toISOString()}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>${t}/posts</loc>
    <lastmod>${new Date().toISOString()}</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.8</priority>
  </url>
  ${e.map(e=>`
  <url>
    <loc>${t}/posts/${e.slug}</loc>
    <lastmod>${e.updatedAt.toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.6</priority>
  </url>
  `).join("")}
</urlset>`;return new o.NextResponse(r,{headers:{"Content-Type":"application/xml","Cache-Control":"public, max-age=3600, s-maxage=3600"}})}catch(e){return console.error("Sitemap generation error:",e),o.NextResponse.json({error:"Failed to generate sitemap"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/sitemap/route",pathname:"/api/sitemap",filename:"route",bundlePath:"app/api/sitemap/route"},resolvedPagePath:"C:\\Users\\aakar\\OneDrive\\Desktop\\delete\\second\\app\\api\\sitemap\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=d,f="/api/sitemap/route";function x(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},4544:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(1185),n=r.n(i);let a=process.env.MONGODB_URI,s=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=s);let o=async function(){if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");if(s.conn)return s.conn;s.promise||(s.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},1201:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(1185),n=r.n(i);async function a(e,t){let r=e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-").replace(/^-+|-+$/g,"");r||(r="untitled"),r.length>100&&(r=r.substring(0,100));let i=r,n=1;for(;await s(i,t);)if(i=`${r}-${n}`,++n>1e3){i=`${r}-${Date.now()}`;break}return i}async function s(e,t){let r={slug:e,isDeleted:!1};return t&&(r._id={$ne:t}),!!await n().model("Post").findOne(r)}let o=new i.Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot exceed 200 characters"],minlength:[3,"Title must be at least 3 characters"]},content:{type:String,required:[!0,"Content is required"],minlength:[10,"Content must be at least 10 characters"]},slug:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0,match:[/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"]},excerpt:{type:String,maxlength:[300,"Excerpt cannot exceed 300 characters"]},status:{type:String,enum:["draft","published","archived"],default:"draft"},featuredImage:{type:String,validate:{validator:function(e){return!e||/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i.test(e)},message:"Featured image must be a valid image URL"}},tags:[{type:String,trim:!0,lowercase:!0}],metaTitle:{type:String,maxlength:[60,"Meta title cannot exceed 60 characters"]},metaDescription:{type:String,maxlength:[160,"Meta description cannot exceed 160 characters"]},author:{type:String,default:"Admin",trim:!0},viewCount:{type:Number,default:0,min:0},isDeleted:{type:Boolean,default:!1}},{timestamps:!0,toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("readingTime").get(function(){return Math.ceil(this.content.replace(/<[^>]*>/g,"").split(/\s+/).length/200)}),o.pre("validate",async function(e){(this.isNew||this.isModified("title"))&&this.title&&(this.slug=await a(this.title,this._id?.toString())),(this.isNew||this.isModified("content"))&&this.content&&(this.excerpt=this.excerpt||function(e){let t=e.replace(/<[^>]*>/g,"").trim();return t.length>300?t.substring(0,300)+"...":t}(this.content)),console.log("Validating post:",{title:this.title,slug:this.slug}),e()}),o.index({status:1,createdAt:-1}),o.index({tags:1}),o.index({title:"text",content:"text"}),o.index({isDeleted:1,status:1});let l=n().models.Post||n().model("Post",o)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,972],()=>r(6181));module.exports=i})();