(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{8791:function(e,t,s){Promise.resolve().then(s.bind(s,8655)),Promise.resolve().then(s.t.bind(s,2972,23))},8655:function(e,t,s){"use strict";s.d(t,{default:function(){return o}});var a=s(7437),l=s(7648),r=s(9376),n=s(2265),i=s(2208),c=s(4630),d=s(8930),x=s(3281);function o(e){let{posts:t}=e,s=(0,r.useRouter)(),[o,h]=(0,n.useState)(null),[u,m]=(0,n.useState)(null);async function p(e){if(!window.confirm("Are you sure you want to delete this post?"))return;h(e);let t=await fetch("/api/posts/".concat(e),{method:"DELETE"});h(null),t.ok?s.refresh():alert("Failed to delete post")}async function y(e){m(e);let t=await fetch("/api/posts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"published"})});m(null),t.ok?s.refresh():alert("Failed to publish post")}return(0,a.jsx)("div",{className:"card",children:t.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Title"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Author"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Created"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Views"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-1",children:e.title}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"flex gap-1 mt-1",children:e.tags.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e))})]})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,a.jsx)("td",{className:"py-4 px-4 text-gray-600",children:e.author}),(0,a.jsx)("td",{className:"py-4 px-4 text-gray-600",children:(0,x.Z)(new Date(e.createdAt),"dd/MM/yyyy")}),(0,a.jsx)("td",{className:"py-4 px-4 text-gray-600",children:e.viewCount||0}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["published"===e.status?(0,a.jsx)(l.default,{href:"/posts/".concat(e.slug),className:"p-2 text-gray-400 hover:text-gray-600",title:"View Post",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})}):(0,a.jsx)("span",{className:"p-2 text-gray-200 cursor-not-allowed",title:"Cannot view draft",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})}),(0,a.jsx)(l.default,{href:"/admin/posts/".concat(e.slug,"/edit"),className:"p-2 text-gray-400 hover:text-primary-600",title:"Edit Post",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})}),"draft"===e.status&&(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-green-600",title:"Publish Post",onClick:()=>y(e.slug),disabled:u===e.slug,children:u===e.slug?"Publishing...":"Publish"}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600",title:"Delete Post",onClick:()=>p(e.slug),disabled:o===e.slug,children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No posts found"})})})}}},function(e){e.O(0,[972,92,971,117,744],function(){return e(e.s=8791)}),_N_E=e.O()}]);